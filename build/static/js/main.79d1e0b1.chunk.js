(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){e.exports=n(42)},40:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(10),i=n.n(r),l=n(11),s=n(12),u=n(14),c=n(13),m=n(15),f=function(e){var t=e.person,n=e.deletePerson;return o.a.createElement("div",null,o.a.createElement("p",null,t.name," ",t.number," ",o.a.createElement("button",{onClick:n},"Poista henkil\xf6")))},d=function(e){var t=e.personList,n=e.filter,a=e.deletePerson;if(0===t.length)return"Ei henkil\xf6it\xe4 listalla";var r=t.filter(function(e){return e.name.toLowerCase().includes(n.toLowerCase())});return o.a.createElement("div",null,r.map(function(e){return o.a.createElement(f,{key:e.id,person:e,deletePerson:a(e.id)})}))},h=function(e){var t=e.filter,n=e.handleFilter;return o.a.createElement("div",null,o.a.createElement("input",{value:t,onChange:n}))},p=n(2),w=n.n(p),v="/api/persons",N={getAll:function(){return w.a.get(v).then(function(e){return e.data})},create:function(e){return w.a.post(v,e).then(function(e){return e.data})},update:function(e,t){return w.a.put("".concat(v,"/").concat(e),t).then(function(e){return e.data})},deletePerson:function(e){return w.a.delete("".concat(v,"/").concat(e)).then(function(e){return e.data})}},E=function(e){var t=e.message;return null===t?null:o.a.createElement("div",{className:"notification"},t)},g=(n(40),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).handleNewName=function(e){n.setState({newName:e.target.value})},n.handleNewNumber=function(e){n.setState({newNumber:e.target.value})},n.handleFilter=function(e){console.log(e.target.value),n.setState({filter:e.target.value})},n.addPerson=function(e){e.preventDefault();var t={name:n.state.newName,number:n.state.newNumber};if(n.state.persons.map(function(e){return e.name}).includes(t.name)){if(window.confirm("".concat(t.name," on jo luettelossa, korvataanko vanha numero uudella?"))){var a=n.state.persons.find(function(e){return e.name===t.name});N.update(a.id,t).then(function(e){n.setState({persons:n.state.persons.map(function(n){return n.name!==t.name?n:e})})}).catch(function(e){N.create(t).then(function(e){n.setState({persons:n.state.persons.map(function(n){return n.name!==t.name?n:e}),newName:"",newNumber:""})})}),n.showNotification("muutettu numero henkil\xf6lle ".concat(a.name))}}else console.log("ei muka l\xf6ytynyt duplikaatteja..."),N.create(t).then(function(e){n.setState({persons:n.state.persons.concat(e),newName:"",newNumber:""}),n.showNotification("".concat(t.name," lis\xe4tty tietokantaan"))})},n.showNotification=function(e){n.setState({notificationMessage:e}),setTimeout(function(){n.setState({notificationMessage:null})},4e3)},n.deletePerson=function(e){return function(){console.log("pyrit\xe4\xe4n deletoimaan ".concat(e," henkil\xf6"));var t=n.state.persons.find(function(t){return t.id===e}),a=window.confirm("Haluatko varmasti poistaa henkil\xf6n ".concat(t.name,"?"));console.log(a),a&&(N.deletePerson(e).then(function(t){n.setState({persons:n.state.persons.filter(function(t){return t.id!==e})})}),n.showNotification("".concat(t.name," poistettu tietokannasta")))}},n.state={persons:[],newName:"sy\xf6t\xe4 nimi....",newNumber:"sy\xf6t\xe4 numero...",filter:"",notificationMessage:null},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;N.getAll().then(function(t){console.log(t),e.setState({persons:t})})}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h2",null,"Puhelinluettelo"),o.a.createElement(E,{message:this.state.notificationMessage}),o.a.createElement(h,{filter:this.state.filter,handleFilter:this.handleFilter}),o.a.createElement("h3",null,"Lis\xe4\xe4 uusi: "),o.a.createElement("form",{onSubmit:this.addPerson},o.a.createElement("div",null,"person.:",o.a.createElement("input",{value:this.state.newName,onChange:this.handleNewName}),"numero:",o.a.createElement("input",{value:this.state.newNumber,onChange:this.handleNewNumber})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"lis\xe4\xe4"))),o.a.createElement("h2",null,"Numerot"),o.a.createElement(d,{personList:this.state.persons,filter:this.state.filter,deletePerson:this.deletePerson}))}}]),t}(o.a.Component));i.a.render(o.a.createElement(g,null),document.getElementById("root"))}},[[16,2,1]]]);
//# sourceMappingURL=main.79d1e0b1.chunk.js.map