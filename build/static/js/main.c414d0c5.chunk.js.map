{"version":3,"sources":["components/Person.js","components/AllPersons.js","components/Filter.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Person","_ref","person","deletePerson","react_default","a","createElement","name","number","onClick","AllPersons","personList","filter","length","personsToDisplay","toLowerCase","includes","map","components_Person","key","id","Filter","handleFilter","value","onChange","baseUrl","persons","getAll","axios","get","then","response","data","create","newObject","post","update","put","concat","delete","Notification","message","className","App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleNewName","event","setState","newName","target","handleNewNumber","newNumber","console","log","addPerson","preventDefault","personObject","state","window","confirm","find","personService","catch","error","showNotification","text","notificationMessage","setTimeout","result","_this2","components_Notification","components_Filter","onSubmit","type","components_AllPersons","React","Component","ReactDOM","render","src_App","document","getElementById"],"mappings":"sOAUeA,EARA,SAAAC,GAA8B,IAA3BC,EAA2BD,EAA3BC,OAAQC,EAAmBF,EAAnBE,aACxB,OACEC,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,SAAIJ,EAAOK,KAAX,IAAkBL,EAAOM,OAAzB,IAAiCJ,EAAAC,EAAAC,cAAA,UAAQG,QAASN,GAAjB,wBCmBxBO,EArBI,SAAAT,GAA0C,IAAvCU,EAAuCV,EAAvCU,WAAYC,EAA2BX,EAA3BW,OAAQT,EAAmBF,EAAnBE,aACxC,GAA0B,IAAtBQ,EAAWE,OACb,MAAO,+BAET,IAAMC,EAAmBH,EACtBC,OAAO,SAAAV,GAAM,OAAIA,EAAOK,KAAKQ,cAAcC,SAASJ,EAAOG,iBAE9D,OACEX,EAAAC,EAAAC,cAAA,WACKQ,EACEG,IAAI,SAAAf,GAAM,OACTE,EAAAC,EAAAC,cAACY,EAAD,CACEC,IAAKjB,EAAOK,KACZL,OAAQA,EACRC,aAAcA,EAAaD,EAAOkB,UCJjCC,EAXA,SAAApB,GAA8B,IAA3BW,EAA2BX,EAA3BW,OAAQU,EAAmBrB,EAAnBqB,aACxB,OACElB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,SACEiB,MAAOX,EACPY,SAAUF,sBCNZG,EAAU,eAsBDC,EAAA,CAAEC,OApBF,WAEb,OADgBC,IAAMC,IAAIJ,GACXK,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAkBlBC,OAfV,SAACC,GAEd,OADgBN,IAAMO,KAAKV,EAASS,GACrBJ,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAaVI,OAVlB,SAAChB,EAAIc,GAElB,OADgBN,IAAMS,IAAN,GAAAC,OAAab,EAAb,KAAAa,OAAwBlB,GAAMc,GAC/BJ,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAQF7B,aALpB,SAACiB,GAEpB,OADgBQ,IAAMW,OAAN,GAAAD,OAAgBb,EAAhB,KAAAa,OAA2BlB,IAC5BU,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SCP5BQ,EAXM,SAAAvC,GAAiB,IAAdwC,EAAcxC,EAAdwC,QACtB,OAAgB,OAAZA,EACK,KAGPrC,EAAAC,EAAAC,cAAA,OAAKoC,UAAU,gBACZD,IC8IQE,qBA9Ib,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACjBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KAmBRQ,cAAgB,SAACC,GACfR,EAAKS,SAAS,CAAEC,QAASF,EAAMG,OAAOjC,SArBrBsB,EAwBnBY,gBAAkB,SAACJ,GACjBR,EAAKS,SAAS,CAAEI,UAAWL,EAAMG,OAAOjC,SAzBvBsB,EA4BnBvB,aAAe,SAAC+B,GACdM,QAAQC,IAAIP,EAAMG,OAAOjC,OACzBsB,EAAKS,SAAS,CAAE1C,OAAQyC,EAAMG,OAAOjC,SA9BpBsB,EAiCnBgB,UAAY,SAACR,GACXA,EAAMS,iBACN,IAAMC,EAAe,CACnBxD,KAAMsC,EAAKmB,MAAMT,QACjB/C,OAAQqC,EAAKmB,MAAMN,WAIrB,GAFmBb,EAAKmB,MAAMtC,QAAQT,IAAI,SAAAf,GAAM,OAAIA,EAAOK,OAE5CS,SAAS+C,EAAaxD,OAEnC,GADe0D,OAAOC,QAAP,GAAA5B,OAAkByB,EAAaxD,KAA/B,0DACJ,CACT,IAAML,EAAU2C,EAAKmB,MAAMtC,QAAQyC,KAAK,SAAAjE,GAAM,OAAIA,EAAOK,OAASwD,EAAaxD,OAC/E6D,EACChC,OAAOlC,EAAOkB,GAAI2C,GAClBjC,KAAK,SAAAC,GACJc,EAAKS,SAAS,CAAE5B,QAASmB,EAAKmB,MAAMtC,QAAQT,IAAI,SAAAf,GAAM,OAAIA,EAAOK,OAASwD,EAAaxD,KAAOL,EAAS6B,QAExGsC,MAAM,SAAAC,GACLF,EACGnC,OAAO8B,GACPjC,KAAK,SAAAC,GACJc,EAAKS,SAAS,CACd5B,QAASmB,EAAKmB,MAAMtC,QAAQT,IAAI,SAAAf,GAAM,OAAIA,EAAOK,OAASwD,EAAaxD,KAAOL,EAAS6B,IACvFwB,QAAS,GACTG,UAAW,SAIjBb,EAAK0B,iBAAL,iCAAAjC,OAAoDpC,EAAOK,aAG7DoD,QAAQC,IAAI,wCACZQ,EACGnC,OAAO8B,GACPjC,KAAK,SAAAC,GACJc,EAAKS,SAAS,CACZ5B,QAASmB,EAAKmB,MAAMtC,QAAQY,OAAOP,GACnCwB,QAAS,GACTG,UAAW,KAEbb,EAAK0B,iBAAL,GAAAjC,OAAyByB,EAAaxD,KAAtC,gCAzEWsC,EA8EnB0B,iBAAmB,SAACC,GAClB3B,EAAKS,SAAS,CACZmB,oBAAqBD,IAEvBE,WAAW,WACT7B,EAAKS,SAAS,CACZmB,oBAAqB,QAEtB,MAtFc5B,EAyFnB1C,aAAe,SAACiB,GACd,OAAO,WACLuC,QAAQC,IAAR,8BAAAtB,OAAoClB,EAApC,gBACA,IAAMlB,EAAS2C,EAAKmB,MAAMtC,QAAQyC,KAAK,SAAAjE,GAAM,OAAIA,EAAOkB,KAAOA,IACzDuD,EAASV,OAAOC,QAAP,yCAAA5B,OAAqDpC,EAAOK,KAA5D,MACfoD,QAAQC,IAAIe,GACTA,IACDP,EACGjE,aAAaiB,GACbU,KAAK,SAAAC,GACJc,EAAKS,SAAS,CAAE5B,QAASmB,EAAKmB,MAAMtC,QAAQd,OAAO,SAAAV,GAAM,OAAIA,EAAOkB,KAAOA,QAE/EyB,EAAK0B,iBAAL,GAAAjC,OAAyBpC,EAAOK,KAAhC,gCAnGJsC,EAAKmB,MAAQ,CACXtC,QAAS,GACT6B,QAAS,uBACTG,UAAW,wBACX9C,OAAO,GACP6D,oBAAqB,MAPN5B,mFAWC,IAAA+B,EAAA5B,KAClBoB,EACGzC,SACAG,KAAK,SAAAC,GACJ4B,QAAQC,IAAI7B,GACZ6C,EAAKtB,SAAS,CAAE5B,QAASK,uCA4F7B,OACE3B,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,6BACAF,EAAAC,EAAAC,cAACuE,EAAD,CAAcpC,QAASO,KAAKgB,MAAMS,sBAClCrE,EAAAC,EAAAC,cAACwE,EAAD,CAAQlE,OAAQoC,KAAKgB,MAAMpD,OAAQU,aAAc0B,KAAK1B,eACtDlB,EAAAC,EAAAC,cAAA,gCACAF,EAAAC,EAAAC,cAAA,QAAMyE,SAAU/B,KAAKa,WACnBzD,EAAAC,EAAAC,cAAA,sBAEEF,EAAAC,EAAAC,cAAA,SACEiB,MAAOyB,KAAKgB,MAAMT,QAClB/B,SAAUwB,KAAKI,gBAJnB,UAOEhD,EAAAC,EAAAC,cAAA,SACEiB,MAAOyB,KAAKgB,MAAMN,UAClBlC,SAAUwB,KAAKS,mBAGnBrD,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UAAQ0E,KAAK,UAAb,iBAGJ5E,EAAAC,EAAAC,cAAA,qBACAF,EAAAC,EAAAC,cAAC2E,EAAD,CACEtE,WAAYqC,KAAKgB,MAAMtC,QACvBd,OAAQoC,KAAKgB,MAAMpD,OACnBT,aAAc6C,KAAK7C,uBAxIX+E,IAAMC,YCHxBC,IAASC,OAAOjF,EAAAC,EAAAC,cAACgF,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.c414d0c5.chunk.js","sourcesContent":["import React from 'react';\n\nconst Person = ({ person, deletePerson }) => {\n  return (\n    <div>\n      <p>{person.name} {person.number} <button onClick={deletePerson}>Poista henkilö</button></p>   \n    </div>\n  )\n}\n\nexport default Person","import React from 'react';\nimport Person from './Person'\n\nconst AllPersons = ({ personList, filter, deletePerson }) => {\n  if (personList.length === 0) {\n    return 'Ei henkilöitä listalla'\n  }\n  const personsToDisplay = personList\n    .filter(person => person.name.toLowerCase().includes(filter.toLowerCase()))\n\n  return (\n    <div>\n        {personsToDisplay\n          .map(person => \n            <Person \n              key={person.name} \n              person={person} \n              deletePerson={deletePerson(person.id)}\n            />)\n        }\n    </div>\n  )   \n}\n\nexport default AllPersons","import React from 'react';\n\nconst Filter = ({ filter, handleFilter }) => {\n  return (\n    <div>\n      <input\n        value={filter}\n        onChange={handleFilter}\n      />\n    </div>\n  )\n}\n\nexport default Filter","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = (newObject) => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)  \n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst deletePerson = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(response => response.data)\n}\n\nexport default { getAll, create, update, deletePerson }","import React from 'react';\n\nconst Notification = ({ message }) => {\n  if (message === null)  {\n    return null\n  }\n  return (\n    <div className='notification'>\n      {message}\n    </div>\n  )\n}\n\nexport default Notification","import React from 'react';\nimport AllPersons from './components/AllPersons'\nimport Filter from './components/Filter'\nimport personService from './services/persons'\nimport Notification from './components/Notification'\nimport './index.css'\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      persons: [],\n      newName: 'syötä nimi....',\n      newNumber: 'syötä numero...',\n      filter:'',\n      notificationMessage: null,\n    }\n  }\n\n  componentDidMount() {\n    personService\n      .getAll()\n      .then(response => {\n        console.log(response)\n        this.setState({ persons: response })\n      })\n  }\n\n  handleNewName = (event) => {\n    this.setState({ newName: event.target.value })\n  }\n\n  handleNewNumber = (event) => {\n    this.setState({ newNumber: event.target.value })\n  }\n\n  handleFilter = (event) => {\n    console.log(event.target.value)\n    this.setState({ filter: event.target.value})\n  }\n\n  addPerson = (event) => {\n    event.preventDefault()\n    const personObject = {\n      name: this.state.newName,\n      number: this.state.newNumber,\n    }\n    const addedNames = this.state.persons.map(person => person.name)\n\n    if (addedNames.includes(personObject.name)) {\n      const result = window.confirm(`${personObject.name} on jo luettelossa, korvataanko vanha numero uudella?`)\n      if(result) {\n        const person  = this.state.persons.find(person => person.name === personObject.name)\n        personService\n        .update(person.id, personObject)\n        .then(response => {\n          this.setState({ persons: this.state.persons.map(person => person.name !== personObject.name ? person : response)})\n        })\n        .catch(error => {\n          personService\n            .create(personObject)\n            .then(response => {\n              this.setState({\n              persons: this.state.persons.map(person => person.name !== personObject.name ? person : response),\n              newName: '',\n              newNumber: '',\n              })\n            })\n        })\n        this.showNotification(`muutettu numero henkilölle ${person.name}`)\n      }\n    } else {\n      console.log('ei muka löytynyt duplikaatteja...')\n      personService\n        .create(personObject)\n        .then(response => {\n          this.setState({\n            persons: this.state.persons.concat(response),\n            newName: '',\n            newNumber: '',\n          })\n          this.showNotification(`${personObject.name} lisätty tietokantaan`)\n        })\n    }\n  }\n\n  showNotification = (text) => {\n    this.setState({\n      notificationMessage: text\n    })\n    setTimeout(() => {\n      this.setState({\n        notificationMessage: null\n      })\n    }, 4000)\n  }\n\n  deletePerson = (id) => {\n    return () => {\n      console.log(`pyritään deletoimaan ${id} henkilö`)\n      const person = this.state.persons.find(person => person.id === id)\n      const result = window.confirm(`Haluatko varmasti poistaa henkilön ${person.name}?`)\n      console.log(result)\n      if(result) {\n        personService\n          .deletePerson(id)\n          .then(response => {\n            this.setState({ persons: this.state.persons.filter(person => person.id !== id)})\n        })\n        this.showNotification(`${person.name} poistettu tietokannasta`)\n      }\n    }\n  }\n\n\n  render() {\n    return (\n      <div>\n        <h2>Puhelinluettelo</h2>\n        <Notification message={this.state.notificationMessage}/>\n        <Filter filter={this.state.filter} handleFilter={this.handleFilter} />\n        <h3>Lisää uusi: </h3>\n        <form onSubmit={this.addPerson}>\n          <div>\n            person.:\n            <input \n              value={this.state.newName} \n              onChange={this.handleNewName}\n            />\n            numero: \n            <input\n              value={this.state.newNumber}\n              onChange={this.handleNewNumber}\n            />               \n          </div>\n          <div>\n            <button type=\"submit\">lisää</button>\n          </div>\n        </form>\n        <h2>Numerot</h2>\n        <AllPersons \n          personList={this.state.persons} \n          filter={this.state.filter} \n          deletePerson={this.deletePerson}\n        />\n      </div>\n    )\n  }\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}